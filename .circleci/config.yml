version: 2
jobs:
    build:
        docker:
            - image: circleci/golang:1.12
        working_directory: ~/go-gin-starterkit
        steps:
            - checkout

            - restore_cache:
                keys:
                  - go-mod-v1-{{ checksum "go.sum" }}

            - run: go mod download
            - run: go build

            - save_cache:
                key: go-mod-v1-{{ checksum "go.sum" }}
                path:
                  - "/go/pkg/mod"

workflows:
    version: 2
    build-test:
        jobs:
            - build